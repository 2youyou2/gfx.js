{"version":3,"file":"gfx.js","sources":["../lib/enums.js","../lib/index-buffer.js","../lib/vertex-buffer.js","../lib/shader.js","../lib/texture.js","../lib/texture-2d.js","../lib/device.js","../index.js"],"sourcesContent":["export let enums = {\n  // buffer usage\n  USAGE_STATIC: 35044,  // gl.STATIC_DRAW\n  USAGE_DYNAMIC: 35048, // gl.DYNAMIC_DRAW\n  USAGE_STREAM: 35040,  // gl.STREAM_DRAW\n\n  // index buffer format\n  INDEX_FMT_UINT8: 5121,  // gl.UNSIGNED_BYTE\n  INDEX_FMT_UINT16: 5123, // gl.UNSIGNED_SHORT\n  INDEX_FMT_UINT32: 5125, // gl.UNSIGNED_INT (OES_element_index_uint)\n\n  // vertex attribute semantic\n  ATTR_POSITION: 'a_position',\n  ATTR_NORMAL: 'a_normal',\n  ATTR_TANGENT: 'a_tangent',\n  ATTR_BITANGENT: 'a_bitangent',\n  ATTR_WEIGHT: 'a_weight',\n  ATTR_INDICES: 'a_indices',\n  ATTR_COLOR: 'a_color',\n  ATTR_COLOR0: 'a_color0',\n  ATTR_COLOR1: 'a_color1',\n  ATTR_UV: 'a_uv',\n  ATTR_UV0: 'a_uv0',\n  ATTR_UV1: 'a_uv1',\n  ATTR_UV2: 'a_uv2',\n  ATTR_UV3: 'a_uv3',\n  ATTR_UV4: 'a_uv4',\n  ATTR_UV5: 'a_uv5',\n  ATTR_UV6: 'a_uv6',\n  ATTR_UV7: 'a_uv7',\n\n  // vertex attribute type\n  ATTR_TYPE_INT8: 5120,    // gl.BYTE\n  ATTR_TYPE_UINT8: 5121,   // gl.UNSIGNED_BYTE\n  ATTR_TYPE_INT16: 5122,   // gl.SHORT\n  ATTR_TYPE_UINT16: 5123,  // gl.UNSIGNED_SHORT\n  ATTR_TYPE_INT32: 5124,   // gl.INT\n  ATTR_TYPE_UINT32: 5125,  // gl.UNSIGNED_INT\n  ATTR_TYPE_FLOAT32: 5126, // gl.FLOAT\n\n  // texture filter\n  FILTER_NEAREST: 9728,                 // gl.FILTER_NEAREST\n  FILTER_LINEAR: 9729,                  // gl.FILTER_LINEAR\n  FILTER_NEAREST_MIPMAP_NEAREST: 9984,  // gl.FILTER_NEAREST_MIPMAP_NEAREST\n  FILTER_LINEAR_MIPMAP_NEAREST: 9985,   // gl.FILTER_LINEAR_MIPMAP_NEAREST\n  FILTER_NEAREST_MIPMAP_LINEAR: 9986,   // gl.FILTER_NEAREST_MIPMAP_LINEAR\n  FILTER_LINEAR_MIPMAP_LINEAR: 9987,    // gl.FILTER_LINEAR_MIPMAP_LINEAR\n\n  // texture wrap mode\n  WRAP_REPEAT: 10497, // gl.REPEAT\n  WRAP_CLAMP: 33071,  // gl.CLAMP_TO_EDGE\n  WRAP_MIRROR: 33648, // gl.MIRRORED_REPEAT\n\n  // texture format\n  // compress formats\n  TEXTURE_FMT_DXT1: 0,\n  TEXTURE_FMT_DXT3: 1,\n  TEXTURE_FMT_DXT5: 2,\n  TEXTURE_FMT_ETC1: 3,\n  TEXTURE_FMT_PVRTC_2BPP_RGB_1: 4,\n  TEXTURE_FMT_PVRTC_2BPP_RGBA_1: 5,\n  TEXTURE_FMT_PVRTC_4BPP_RGB_1: 6,\n  TEXTURE_FMT_PVRTC_4BPP_RGBA_1: 7,\n\n  // normal formats\n  TEXTURE_FMT_A8: 8,\n  TEXTURE_FMT_L8: 9,\n  TEXTURE_FMT_L8_A8: 10,\n  TEXTURE_FMT_R5_G6_B5: 11,\n  TEXTURE_FMT_R5_G5_B5_A1: 12,\n  TEXTURE_FMT_R4_G4_B4_A4: 13,\n  TEXTURE_FMT_RGB8: 14,\n  TEXTURE_FMT_RGBA8: 15,\n  TEXTURE_FMT_RGB16F: 16,\n  TEXTURE_FMT_RGBA16F: 17,\n  TEXTURE_FMT_RGB32F: 18,\n  TEXTURE_FMT_RGBA32F: 19,\n  TEXTURE_FMT_R32F: 20,\n  TEXTURE_FMT_111110F: 21,\n  TEXTURE_FMT_SRGB: 22,\n  TEXTURE_FMT_SRGBA: 23,\n\n  // depth formats\n  TEXTURE_FMT_DEPTH: 24,\n  TEXTURE_FMT_DEPTHSTENCIL: 25,\n};\n\nexport function attrTypeBytes(attrType) {\n  if (attrType === enums.ATTR_TYPE_INT8) {\n    return 1;\n  } else if (attrType === enums.ATTR_TYPE_UINT8) {\n    return 1;\n  } else if (attrType === enums.ATTR_TYPE_INT16) {\n    return 2;\n  } else if (attrType === enums.ATTR_TYPE_UINT16) {\n    return 2;\n  } else if (attrType === enums.ATTR_TYPE_INT32) {\n    return 4;\n  } else if (attrType === enums.ATTR_TYPE_UINT32) {\n    return 4;\n  } else if (attrType === enums.ATTR_TYPE_FLOAT32) {\n    return 4;\n  }\n\n  console.warn(`Unknown ATTR_TYPE: ${attrType}`);\n  return 0;\n}","import { enums } from './enums';\n\nexport default class IndexBuffer {\n  /**\n   * @constructor\n   * @param {Device} device\n   * @param {INDEX_FMT_*} format\n   * @param {USAGE_*} usage\n   * @param {ArrayBuffer} data\n   * @param {Number} numIndices\n   * @param {Boolean} persist\n   */\n  constructor(device, format, usage, data, numIndices, persist) {\n    this._device = device;\n    this._format = format;\n    this._usage = usage;\n    this._persist = persist;\n\n    // calculate bytes\n    let bytes = 0;\n    if (format === enums.INDEX_FMT_UINT8) {\n      bytes = numIndices;\n    } else if (format === enums.INDEX_FMT_UINT16) {\n      bytes = 2 * numIndices;\n    } else if (format === enums.INDEX_FMT_UINT32) {\n      bytes = 4 * numIndices;\n    }\n    this._bytes = bytes;\n\n    // update\n    this._id = device._gl.createBuffer();\n    this._data = null;\n    this.update(0, data);\n\n    // stats\n    device._vram.ib += bytes;\n  }\n\n  /**\n   * @method destroy\n   */\n  destroy() {\n    let gl = this.device.gl;\n    gl.deleteBuffer(this._id);\n    this.device._vram.ib -= this.bytes;\n\n    this._id = -1;\n  }\n\n  /**\n   * @method update\n   * @param {Number} offset\n   * @param {ArrayBuffer} data\n   */\n  update(offset, data) {\n    if (this._id === -1) {\n      console.error('The buffer is destroyed');\n      return;\n    }\n\n    if (data && data.byteLength + offset >= this._bytes) {\n      console.error('Failed to update data, bytes exceed.');\n      return;\n    }\n\n    let gl = this._device._gl;\n    let glUsage = this._usage;\n\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._id);\n    if (!data) {\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this._bytes, glUsage);\n    } else {\n      if (offset) {\n        gl.bufferSubData(gl.ELEMENT_ARRAY_BUFFER, data, glUsage);\n      } else {\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, data, glUsage);\n      }\n    }\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n\n    // store the data\n    if (this._persist) {\n      if (this._data) {\n        this._data.set(data, offset);\n      } else {\n        this._data = data;\n      }\n    }\n  }\n}","export default class VertexBuffer {\n  /**\n   * @constructor\n   * @param {Device} device\n   * @param {VertexFormat} format\n   * @param {USAGE_*} usage\n   * @param {ArrayBuffer} data\n   * @param {Number} numVertices\n   * @param {Boolean} persist\n   */\n  constructor(device, format, usage, data, numVertices, persist) {\n    this._device = device;\n    this._format = format;\n    this._usage = usage;\n    this._persist = persist;\n\n    // calculate bytes\n    this._bytes = this._format._bytes * numVertices;\n\n    // update\n    this._id = device._gl.createBuffer();\n    this._data = null;\n    this.update(0, data);\n\n    // stats\n    device._vram.vb += this._bytes;\n  }\n\n  /**\n   * @method destroy\n   */\n  destroy() {\n    let gl = this.device.gl;\n    gl.deleteBuffer(this._id);\n    this.device._vram.vb -= this.bytes;\n\n    this._id = -1;\n  }\n\n  /**\n   * @method update\n   * @param {Number} offset\n   * @param {ArrayBuffer} data\n   */\n  update(offset, data) {\n    if (this._id === -1) {\n      console.error('The buffer is destroyed');\n      return;\n    }\n\n    if (data && data.byteLength + offset >= this._bytes) {\n      console.error('Failed to update data, bytes exceed.');\n      return;\n    }\n\n    let gl = this._device._gl;\n    let glUsage = this._usage;\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, this._id);\n    if (!data) {\n      gl.bufferData(gl.ARRAY_BUFFER, this._bytes, glUsage);\n    } else {\n      if (offset) {\n        gl.bufferSubData(gl.ARRAY_BUFFER, data, glUsage);\n      } else {\n        gl.bufferData(gl.ARRAY_BUFFER, data, glUsage);\n      }\n    }\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    // store the data\n    if (this._persist) {\n      if (this._data) {\n        this._data.set(data, offset);\n      } else {\n        this._data = data;\n      }\n    }\n  }\n}","export default class Shader {\n  constructor() {\n  }\n}","import { enums } from './enums';\n\nexport default class Texture {\n  constructor(device) {\n    this._device = device;\n\n    this._width = 4;\n    this._height = 4;\n    this._mipmaps = true;\n\n    this._anisotropy = 1;\n    this._minFilter = enums.FILTER_LINEAR_MIPMAP_LINEAR;\n    this._magFilter = enums.FILTER_LINEAR;\n    this._wrapS = enums.WRAP_REPEAT;\n    this._wrapT = enums.WRAP_REPEAT;\n    this._format = enums.TEXTURE_FMT_RGBA8;\n  }\n\n  destroy() {\n    let gl = this.device.gl;\n    gl.deleteTexture(this._id);\n\n    this.device._vram.tex -= this.bytes;\n    this._id = -1;\n  }\n\n  update () {\n  }\n}","import Texture from './texture';\n\nexport default class Texture2D extends Texture {\n  constructor(device, options) {\n    super(device);\n\n    if (options) {\n      if (options.width !== undefined) {\n        this._width = options.width;\n      }\n      if (options.height !== undefined) {\n        this._height = options.height;\n      }\n      if (options.mipmpas !== undefined) {\n        this._mipmaps = options.mipmpas;\n      }\n\n      if (options.anisotropy !== undefined) {\n        this._anisotropy = options.anisotropy;\n      }\n      if (options.minFilter !== undefined) {\n        this._minFilter = options.minFilter;\n      }\n      if (options.magFilter !== undefined) {\n        this._magFilter = options.magFilter;\n      }\n      if (options.wrapS !== undefined) {\n        this._wrapS = options.wrapS;\n      }\n      if (options.wrapT !== undefined) {\n        this._wrapT = options.wrapT;\n      }\n\n      if (options.format !== undefined) {\n        this._format = options.format;\n      }\n    }\n  }\n\n  update() {\n  }\n\n  setStates(info) {\n    let gl = this._device._gl;\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, this._id);\n\n    if (info.minFilter !== undefined && info.minFilter !== this._minFilter) {\n      this._minFilter = info.minFilter;\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, info.minFilter);\n    }\n\n    if (info.magFilter !== undefined && info.magFilter !== this._magFilter) {\n      this._magFilter = info.magFilter;\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, info.magFilter);\n    }\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, info.wrapS);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, info.wrapT);\n\n    if (this._device.hasExt('EXT_texture_filter_anisotropic')) {\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAX_ANISOTROPY_EXT, info.anisotropic);\n    }\n\n    if (info.genMipmaps) {\n      gl.hint(gl.GENERATE_MIPMAP_HINT, info.mipmapHint);\n      gl.generateMipmap(gl.TEXTURE_2D);\n    }\n\n    gl.bindTexture(gl.TEXTURE_2D, null);\n  }\n}","\nexport default class Device {\n  /**\n   * @param {HTMLElement} canvasEL\n   * @param {object} opts\n   */\n  constructor(canvasEL, opts) {\n    let gl;\n\n    try {\n      gl = canvasEL.getContext('webgl', opts);\n    } catch (err) {\n      console.error(err);\n      return;\n    }\n\n    this._gl = gl;\n    this._extensions = {};\n    this._vram = { texture: 0, vb: 0, ib: 0 };\n\n    this._initExtensions([\n      'OES_vertex_array_object',\n      'OES_texture_float',\n      'OES_texture_half_float',\n      'OES_texture_half_float_linear',\n      'WEBGL_compressed_texture_s3tc',\n      'WEBGL_compressed_texture_pvrtc',\n      'WEBGL_compressed_texture_etc1',\n      'WEBGL_compressed_texture_atc',\n      'EXT_texture_filter_anisotropic'\n    ]);\n  }\n\n  _initExtensions(extensions) {\n    let gl = this._gl;\n\n    for (let i = 0; i < extensions.length; ++i) {\n      let name = extensions[i];\n\n      try {\n        let ext = gl.getExtension(name);\n        if (ext) {\n          this._extensions[name] = ext;\n        }\n\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  }\n\n  hasExt(name) {\n    return this._extensions[name] !== undefined;\n  }\n\n  // TODO: set states\n\n  draw(base, count) {\n    // TODO\n  }\n}","\nimport {enums, attrTypeBytes} from './lib/enums';\nimport IndexBuffer from './lib/index-buffer';\nimport VertexBuffer from './lib/vertex-buffer';\nimport Shader from './lib/shader';\nimport Texture from './lib/texture';\nimport Texture2D from './lib/texture-2d';\nimport Device from './lib/device';\n\nlet gfx = {\n  // classes\n  IndexBuffer,\n  VertexBuffer,\n  Shader,\n  Texture,\n  Texture2D,\n  Device,\n\n  // functions\n  attrTypeBytes,\n};\nObject.assign(gfx, enums);\n\nexport default gfx;"],"names":[],"mappings":"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"}